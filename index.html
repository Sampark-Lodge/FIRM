<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ShishuKotha - Automated Moral Story Video Generation System">
    <title>ShishuKotha - Control Room Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Outfit:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <h1>‡¶∂‡¶ø‡¶∂‡ßÅ‡¶ï‡¶•‡¶æ</h1>
                    <span class="logo-subtitle">ShishuKotha Control Room</span>
                </div>
                <div class="header-actions">
                    <span class="connection-status" id="connectionStatus">
                        <span class="status-dot offline"></span>
                        Connecting...
                    </span>
                    <button class="btn btn-secondary" id="refreshBtn">
                        <span class="icon">üîÑ</span>
                        Refresh
                    </button>
                </div>
            </div>
        </div>
    </header>
    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Live Status Panel -->
            <section class="live-status-panel">
                <div class="status-grid-main">
                    <!-- Pipeline Status -->
                    <div class="status-card glass-card pipeline-status">
                        <div class="card-header">
                            <h3>üé¨ Pipeline Status</h3>
                            <span class="live-indicator" id="liveIndicator">‚óè LIVE</span>
                        </div>
                        <div class="pipeline-stages">
                            <div class="stage" id="stageStory">
                                <span class="stage-icon">üìù</span>
                                <span class="stage-name">Story</span>
                                <span class="stage-status" id="stageStoryStatus">Idle</span>
                            </div>
                            <div class="stage-arrow">‚Üí</div>
                            <div class="stage" id="stageMedia">
                                <span class="stage-icon">üñºÔ∏è</span>
                                <span class="stage-name">Media</span>
                                <span class="stage-status" id="stageMediaStatus">Idle</span>
                            </div>
                            <div class="stage-arrow">‚Üí</div>
                            <div class="stage" id="stageVideo">
                                <span class="stage-icon">üé•</span>
                                <span class="stage-name">Video</span>
                                <span class="stage-status" id="stageVideoStatus">Idle</span>
                            </div>
                        </div>
                        <div class="current-task" id="currentTask">
                            <p>No active task</p>
                        </div>
                    </div>
                    <!-- Video Generation Progress -->
                    <div class="status-card glass-card video-progress">
                        <div class="card-header">
                            <h3>üéûÔ∏è Video Generation</h3>
                            <span class="badge" id="videoLanguageBadge">--</span>
                        </div>
                        <div class="progress-details">
                            <div class="progress-stat">
                                <span class="stat-label">Story</span>
                                <span class="stat-value" id="videoStoryName">--</span>
                            </div>
                            <div class="progress-stat">
                                <span class="stat-label">Scene</span>
                                <span class="stat-value" id="videoSceneProgress">-- / --</span>
                            </div>
                        </div>
                        <div class="progress-bar large">
                            <div class="progress-fill animated" id="videoProgressFill" style="width: 0%"></div>
                        </div>
                        <p class="progress-message" id="videoProgressMessage">No video generation in progress</p>
                    </div>
                </div>
            </section>
            <!-- Error & Warnings Panel -->
            <section class="alerts-section" id="alertsSection" style="display: none;">
                <div class="alert-card glass-card error" id="errorAlert">
                    <div class="alert-header">
                        <span class="alert-icon">‚ö†Ô∏è</span>
                        <h4>Error Detected</h4>
                        <button class="dismiss-btn" id="dismissError">‚úï</button>
                    </div>
                    <p class="alert-message" id="errorMessage">--</p>
                    <p class="alert-time" id="errorTime">--</p>
                </div>
            </section>
            <!-- API Status Section -->
            <section class="api-status-section">
                <h2 class="section-title">System Health</h2>
                <div class="api-grid">
                    <div class="api-card glass-card">
                        <div class="api-icon">üìù</div>
                        <div class="api-info">
                            <h4>Text Generation</h4>
                            <p>Groq API (LLaMA)</p>
                        </div>
                        <span class="api-status-badge" id="textApiStatusBadge">Checking...</span>
                    </div>
                    <div class="api-card glass-card">
                        <div class="api-icon">üñºÔ∏è</div>
                        <div class="api-info">
                            <h4>Image Generation</h4>
                            <p>Pollinations.AI</p>
                        </div>
                        <span class="api-status-badge online" id="imageApiStatusBadge">Online</span>
                    </div>
                    <div class="api-card glass-card">
                        <div class="api-icon">üîä</div>
                        <div class="api-info">
                            <h4>Voice Generation</h4>
                            <p>Google Cloud TTS</p>
                        </div>
                        <span class="api-status-badge" id="ttsApiStatusBadge">Checking...</span>
                    </div>
                    <div class="api-card glass-card">
                        <div class="api-icon">üé•</div>
                        <div class="api-info">
                            <h4>Video Animation</h4>
                            <p>Kling AI</p>
                        </div>
                        <span class="api-status-badge" id="videoApiStatusBadge">Checking...</span>
                    </div>
                    <div class="api-card glass-card">
                        <div class="api-icon">‚öôÔ∏è</div>
                        <div class="api-info">
                            <h4>Apps Script</h4>
                            <p>Backend Engine</p>
                        </div>
                        <span class="api-status-badge" id="backendStatusBadge">Connecting...</span>
                    </div>
                </div>
            </section>
            <!-- Story Queue & Downloads -->
            <section class="main-panels">
                <div class="panel-grid">
                    <!-- Story Queue -->
                    <div class="panel glass-card">
                        <div class="panel-header">
                            <h3>üìö Story Queue</h3>
                            <button class="btn btn-small btn-primary" id="generateIdeasBtn">+ Generate Ideas</button>
                        </div>
                        <div class="story-queue" id="storyQueue">
                            <div class="loading-placeholder">
                                <div class="spinner"></div>
                                <p>Loading stories...</p>
                            </div>
                        </div>
                    </div>
                    <!-- Latest Downloads -->
                    <div class="panel glass-card">
                        <div class="panel-header">
                            <h3>üì• Latest Videos</h3>
                        </div>
                        <div class="downloads-list" id="downloadsList">
                            <div class="download-item">
                                <div class="download-info">
                                    <span class="language-tag bn">üáßüá© Bengali</span>
                                    <span class="title" id="bnVideoTitle">--</span>
                                </div>
                                <div class="download-actions">
                                    <a href="#" class="btn btn-small btn-download disabled"
                                        id="bnDownloadBtn">Download</a>
                                    <button class="btn btn-small btn-outline" id="bnRegenerateBtn">Regenerate</button>
                                </div>
                            </div>
                            <div class="download-item">
                                <div class="download-info">
                                    <span class="language-tag en">üá¨üáß English</span>
                                    <span class="title" id="enVideoTitle">--</span>
                                </div>
                                <div class="download-actions">
                                    <a href="#" class="btn btn-small btn-download disabled"
                                        id="enDownloadBtn">Download</a>
                                    <button class="btn btn-small btn-outline" id="enRegenerateBtn">Regenerate</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Control Buttons -->
            <section class="control-section">
                <h2 class="section-title">Controls</h2>
                <div class="control-buttons">
                    <button class="control-btn primary" id="startPipelineBtn">
                        <span class="btn-icon">‚ñ∂Ô∏è</span>
                        <span class="btn-text">Start Full Pipeline</span>
                        <span class="btn-desc">Story ‚Üí Media ‚Üí Video</span>
                    </button>
                    <button class="control-btn secondary" id="startVideoOnlyBtn">
                        <span class="btn-icon">üé¨</span>
                        <span class="btn-text">Generate Video Only</span>
                        <span class="btn-desc">From existing media</span>
                    </button>
                    <a href="#" class="control-btn outline" id="openDriveBtn">
                        <span class="btn-icon">üìÅ</span>
                        <span class="btn-text">Open Drive Folder</span>
                        <span class="btn-desc">View all files</span>
                    </a>
                    <a href="#" class="control-btn outline" id="openSheetsBtn">
                        <span class="btn-icon">üìä</span>
                        <span class="btn-text">Open Google Sheets</span>
                        <span class="btn-desc">Manage data</span>
                    </a>
                </div>
            </section>
            <!-- Generation Log -->
            <section class="log-section">
                <h2 class="section-title">Generation History</h2>
                <div class="log-container glass-card">
                    <table class="log-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Story</th>
                                <th>English</th>
                                <th>Bengali</th>
                                <th>Video</th>
                            </tr>
                        </thead>
                        <tbody id="logTableBody">
                            <tr>
                                <td colspan="5" class="loading-cell">
                                    <div class="spinner"></div>
                                    <span>Loading history...</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </main>
    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2026 ShishuKotha Control Room</p>
            <p class="footer-meta">Groq + Pollinations + Google TTS + Kling AI</p>
        </div>
    </footer>
    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <span class="toast-icon" id="toastIcon">‚úì</span>
        <span class="toast-message" id="toastMessage"></span>
    </div>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="spinner large"></div>
            <p id="loadingMessage">Processing...</p>
        </div>
    </div>
    <!-- Scripts -->
    <script src="js/api.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
